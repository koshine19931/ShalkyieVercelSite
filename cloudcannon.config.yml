# CloudCannon Configuration
source: .

# 1. Global Field Definitions
_inputs:
  movie_name:
    type: text
    label: Movie Name (Display)
  title:
    type: text
    label: Title (URL Slug)
    comment: "Do not use spaces. Example: SK-12345"
  video_url:
    type: text
    label: Video URL
  description:
    type: textarea
    label: Description
  date:
    type: datetime
    label: Publish Date
  featured:
    type: boolean
    label: Featured
  category:
    type: select
    label: Category
    options:
      values:
        - Action
        - Comedy
        - Drama
        - Horror
        - Romance
        - Thriller
        - Sci-Fi
        - Other
      allow_empty: true
  tags:
    type: list
    label: Tags

# 2. Collections
collections_config:
  posts:
    path: _posts
    output: true
    name: Videos
    icon: local_movies
    sort_key: date
    sort_options:
      order: desc
    
    # --- THIS IS THE FIX ---
    # We use 'preview' to tell CloudCannon exactly what to show on the card
    preview:
      text:
        key: movie_name
      subtext:
        key: date
      icon:
        icon: movie
    # -----------------------
    
    schemas:
      default:
        path: schemas/post.md
        name: Video Post
        
  series:
    path: _series
    output: true
    name: Series
    icon: live_tv
    sort_key: date
    sort_options:
      order: desc
    
    # --- FIX FOR SERIES TOO ---
    preview:
      text:
        key: series_name
      subtext:
        key: date
      icon:
        icon: tv
    # --------------------------

# 3. Build Settings
build:
  install_command: npm install
  build_command: node generate-posts.js
  output_path: .
