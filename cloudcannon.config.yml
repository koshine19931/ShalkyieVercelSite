# CloudCannon Configuration
source: .

# Global pagination: 30 items per page for all collections
pagination:
  per_page: 30
  per_page_options: [10, 20, 30, 50, 100]  # Let editors choose if needed
  sort_by: date
  sort_direction: desc

collections_config:
  posts:
    path: _posts
    output: true
    name: Videos
    icon: local_movies
    sort_key: date
    sort_options:
      order: desc
    preview:
      text:
        key: movie_name
      subtext:
        key: date
      icon:
        icon: movie
    pagination:
      per_page: 30  # Explicit for this collection (optional override)
    fields:
      - name: movie_name
        label: Movie Name (Display)
        type: text
      - name: title
        label: Title (URL Slug)
        type: text
        comment: "Do not use spaces. Example: SK-12345"
      - name: date
        label: Publish Date
        type: datetime
        instance_value: NOW
        options:
          timezone: "Asia/Yangon"
      - name: video_url
        label: Video URL
        type: text
      - name: description
        label: Description
        type: textarea
      - name: featured
        label: Featured
        type: boolean
      - name: category
        label: Category
        type: select
        options:
          values:
            - Action
            - Comedy
            - Drama
            - Horror
            - Romance
            - Thriller
            - Sci-Fi
            - Other
          allow_empty: false
      - name: tags
        label: Tags
        type: multiselect
        options:
          allow_create: true
          values:
            - New
            - Popular
    schemas:
      default:
        path: schemas/post.md
        name: Video Post

  series:
    path: _series
    output: true
    name: Series
    icon: live_tv
    sort_key: date
    sort_options:
      order: desc
    preview:
      text:
        key: series_name
      subtext:
        key: date
      icon:
        icon: tv
    pagination:
      per_page: 30  # 30 series per page
    schemas:
      default:
        path: schemas/series.md
        name: New Series
    fields:
      - name: series_name
        label: Series Name
        type: text
      - name: title
        label: Title (Slug)
        type: text
      - name: date
        label: Publish Date
        type: datetime
        instance_value: NOW
        options:
          timezone: "Asia/Yangon"
      - name: description
        label: Description
        type: textarea
      - name: category
        label: Category
        type: select
        options:
          values:
            - Action
            - Comedy
            - Drama
            - Horror
            - Romance
            - Thriller
            - Sci-Fi
            - Other
      - name: tags
        label: Tags
        type: multiselect
        options:
          allow_create: true
          values:
            - New
            - Popular
      - name: seasons
        label: Seasons
        type: array
        options:
          min_items: 1  # At least one season recommended
        structures:
          - name: Season
            label: Add Season
            icon: folder
            values:
              season_number: 1
              episodes: []
            preview:
              text:
                - template: "Season {season_number}"
                - fallback: "New Season"
              subtext:
                - template: "{episodes.length} episodes"
                - fallback: "No episodes yet"
              icon: folder
            fields:
              - name: season_number
                label: Season Number (auto-fixed on build)
                type: number
                comment: "Enter any number — it will be automatically renumbered sequentially (1, 2, 3...) when the site builds."
              - name: episodes
                label: Episodes in this Season
                type: array
                structures:
                  - name: Episode
                    label: Add Episode
                    icon: play_circle
                    values:
                      episode_number: 1
                      episode_title: "New Episode"
                      video_url: ""
                    preview:
                      text:
                        - template: "Episode {episode_number}: {episode_title}"
                        - template: "Episode {episode_number}"
                        - fallback: "New Episode"
                      subtext:
                        - key: video_url
                          template: "Has video"
                          fallback: "No video URL yet"
                      icon: play_circle
                    fields:
                      - name: episode_number
                        label: Episode Number (auto-fixed on build)
                        type: number
                        comment: "Enter any number — it will be renumbered per season on build."
                      - name: episode_title
                        label: Episode Title
                        type: text
                      - name: video_url
                        label: Video URL
                        type: text
