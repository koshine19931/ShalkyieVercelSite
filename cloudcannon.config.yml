# CloudCannon Configuration
source: .

collections_config:
  posts:
    path: _posts
    output: true
    name: Videos
    icon: local_movies
    sort_key: date
    sort_options:
      order: desc

    preview:
      text:
        key: movie_name
      subtext:
        key: date
      icon:
        icon: movie

    fields:
      - name: movie_name
        label: Movie Name (Display)
        type: text
        
      - name: title
        label: Title (URL Slug)
        type: text
        comment: "Do not use spaces. Example: SK-12345"
        
      # DATE IS NOW AUTO (Managed by "NOW")
      - name: date
        label: Publish Date
        type: datetime
        instance_value: NOW
        options:
          timezone: "Asia/Yangon"
        
      - name: video_url
        label: Video URL
        type: text
        
      - name: description
        label: Description
        type: textarea
        
      - name: featured
        label: Featured
        type: boolean
        
      - name: category
        label: Category
        type: select
        options:
          values:
            - Action
            - Comedy
            - Drama
            - Horror
            - Romance
            - Thriller
            - Sci-Fi
            - Other
          allow_empty: false
          
      # --- FIX FOR TAGS ---
      - name: tags
        label: Tags
        type: multiselect
        options:
          allow_create: true # Allows typing new tags
          values:            # Must not be empty!
            - New
            - Popular
            - 1080p
      # --------------------

    schemas:
      default:
        path: schemas/post.md
        name: Video Post

  series:
    path: _series
    output: true
    name: Series
    icon: live_tv
    sort_key: date
    sort_options:
      order: desc
    
    preview:
      text:
        key: series_name
      subtext:
        key: date
      icon:
        icon: tv
    
    # Simple fix for Series seasons if you use them later
    fields:
      - name: seasons
        label: Seasons
        type: array

# Build Settings
build:
  install_command: npm install
  build_command: node generate-posts.js
  output_path: .
